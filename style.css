:root {
    --bg-chat: #e5ddd5;
    --header-color: #075e54;
    --msg-bot: #ffffff;
    --msg-user: #dcf8c6;
    --text-main: #303030;
    --text-sub: #999;
    --input-bg: #f0f0f0;
    --chat-window-bg: #efe7dd;
}

body.dark-mode {
    --bg-chat: #0b141a;
    --header-color: #202c33;
    --msg-bot: #202c33;
    --msg-user: #005c4b;
    --text-main: #e9edef;
    --text-sub: #8696a0;
    --input-bg: #2a3942;
    --chat-window-bg: #0b141a;
}

* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }

html, body { 
    height: 100%; 
    width: 100%; 
    overflow: hidden; 
    background-color: var(--bg-chat);
    position: fixed; /* Evita bounce no iOS */
}

body { display: flex; justify-content: center; }

.chat-container { 
    width: 100%; 
    max-width: 450px; 
    height: 100%; 
    background: var(--chat-window-bg); 
    display: flex; 
    flex-direction: column; 
    position: relative;
}

.header { 
    background: var(--header-color); 
    color: white; 
    padding: 10px 15px; 
    display: flex; 
    align-items: center; 
    gap: 12px; 
    height: 65px;
    z-index: 1000;
}

.header img { width: 40px; height: 40px; border-radius: 50%; }
.header-info { flex: 1; }
.header-info h2 { font-size: 16px; }
.header-info p { font-size: 11px; opacity: 0.8; }
.btn-header { background: none; border: none; color: white; cursor: pointer; font-size: 20px; margin-left: 5px; }

#chat-window { 
    flex: 1; 
    overflow-y: auto; 
    padding: 15px; 
    display: flex; 
    flex-direction: column; 
    gap: 10px;
    -webkit-overflow-scrolling: touch;
}

.message { 
    max-width: 85%; 
    padding: 10px 14px; 
    border-radius: 8px; 
    font-size: 15px; 
    line-height: 1.4; 
    color: var(--text-main); 
    box-shadow: 0 1px 2px rgba(0,0,0,0.1); 
    word-wrap: break-word; 
}
.bot { background: var(--msg-bot); align-self: flex-start; border-top-left-radius: 0; }
.user { background: var(--msg-user); align-self: flex-end; border-top-right-radius: 0; }
.time { font-size: 10px; color: var(--text-sub); text-align: right; margin-top: 5px; }

.topics-container { display: flex; flex-direction: column; gap: 8px; margin-bottom: 10px; }
.topic-btn { 
    background: var(--msg-bot); 
    border: 1px solid var(--header-color); 
    color: var(--text-main); 
    padding: 12px; 
    border-radius: 20px; 
    text-align: left; 
    font-size: 14px;
    cursor: pointer;
}

.input-area { 
    background: var(--input-bg); 
    padding: 10px 15px; 
    display: flex; 
    gap: 10px; 
    align-items: center;
    height: 75px;
    z-index: 2000;
    position: relative;
    border-top: 1px solid rgba(0,0,0,0.05);
}

input { 
    flex: 1; 
    padding: 12px 18px; 
    border: none; 
    border-radius: 25px; 
    outline: none; 
    background: #fff; 
    color: #000; 
    font-size: 16px; /* Essencial para mobile */
}

#send-btn { 
    background: var(--header-color); 
    color: white; 
    border: none; 
    width: 48px; 
    height: 48px; 
    border-radius: 50%; 
    display: flex; 
    align-items: center; 
    justify-content: center;
    cursor: pointer;
}

#sos-btn { position: fixed; bottom: 90px; right: 20px; width: 60px; height: 60px; border-radius: 50%; background: #ff4b2b; color: white; border: none; font-weight: bold; z-index: 500; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }

#sos-overlay { 
    display: none; 
    position: fixed; 
    top: 0; left: 0; 
    width: 100%; height: 100%; 
    background: var(--bg-chat); 
    z-index: 3000; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center; 
    padding: 20px; 
}
#breath-circle { 
    width: 160px; height: 160px; 
    border-radius: 50%; 
    border: 4px solid #ff4b2b; 
    display: flex; align-items: center; justify-content: center; 
    transition: 4s ease-in-out; 
    margin: 40px 0; 
}
#breath-text { color: #ff4b2b; font-weight: bold; }
.btn-cvv { display: block; background: #ff4b2b; color: white; padding: 15px 30px; text-decoration: none; border-radius: 30px; margin-bottom: 20px; font-weight: bold; text-align: center; }
.btn-voltar { background: none; border: 1px solid var(--text-sub); padding: 10px 20px; border-radius: 20px; color: var(--text-sub); cursor: pointer; }

.typing { font-size: 12px; color: var(--text-sub); margin-left: 20px; margin-bottom: 8px; display: none; }